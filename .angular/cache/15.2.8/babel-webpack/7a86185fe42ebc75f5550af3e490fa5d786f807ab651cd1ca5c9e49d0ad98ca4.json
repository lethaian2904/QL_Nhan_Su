{"ast":null,"code":"import { FormGroup, FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/user.service\";\nimport * as i2 from \"../service/server-http.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/form-field\";\nfunction NhanvienFormComponent_span_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"v\\u00E0 nh\\u1EADp m\\u1EDBi\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NhanvienFormComponent_button_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function NhanvienFormComponent_button_44_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.ramdomNhanvien());\n    });\n    i0.ɵɵtext(1, \" L\\u1EA5y ng\\u1EABu nhi\\u00EAn 1 ng\\u01B0\\u1EDDi \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.nhanvienForm.valid);\n  }\n}\nexport class NhanvienFormComponent {\n  constructor(user, serverHttp, router, route) {\n    this.user = user;\n    this.serverHttp = serverHttp;\n    this.router = router;\n    this.route = route;\n    this.id = 0;\n    this.nhanvienForm = new FormGroup({\n      MaNhanVien: new FormControl(''),\n      HoTen: new FormControl(''),\n      NgaySinh: new FormControl(''),\n      GioiTinh: new FormControl(''),\n      MaChucVu: new FormControl(''),\n      MaPhongBan: new FormControl(''),\n      HeSoLuong: new FormControl(''),\n      increamentNhanVien: new FormControl('')\n    });\n  }\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get('id');\n    this.id = id ? +id : 0;\n    if (this.id > 0) {\n      this.loadData(this.id);\n    }\n    ;\n  }\n  loadData(id) {\n    this.serverHttp.getNhanviens().subscribe(data => {\n      console.log('getNhanvien', data);\n      const controlName = 'MaNhanVien';\n      for (; controlName;) {\n        this.nhanvienForm.controls[controlName].setValue(data[controlName]);\n      }\n    });\n  }\n  createNewData() {\n    const newNhanVien = {};\n    for (const controlName of Object.keys(this.nhanvienForm.controls)) {\n      if (controlName) {\n        newNhanVien[controlName] = this.nhanvienForm.controls.HoTen;\n        console.log(newNhanVien[controlName]);\n      }\n    }\n    return newNhanVien;\n  }\n  saveAndGotoList() {\n    if (this.id > 0) {\n      this.serverHttp.modifyNhanvien(this.id, this.createNewData()).subscribe(data => {\n        this.router.navigate(['nhanviens']);\n      });\n    } else {\n      this.serverHttp.addNhanvien(this.createNewData()).subscribe(data => {\n        this.router.navigate(['nhanviens']);\n      });\n    }\n  }\n  save() {\n    if (this.id > 0) {\n      this.serverHttp.modifyNhanvien(this.id, this.createNewData()).subscribe(data => {\n        //\n      });\n    } else {\n      this.serverHttp.addNhanvien(this.createNewData()).subscribe(data => {\n        this.user.icreamentNhanvien();\n        this.nhanvienForm.reset();\n      });\n    }\n  }\n  ramdomNhanvien() {\n    this.serverHttp.getRamdomNhanvien();\n    this.serverHttp.getNhanviens().subscribe(data => {\n      console.log('getRamdomNhanvien', data);\n      if (data && data.results && data.results.length > 0) {\n        const nhanvien = data.results[0];\n        this.nhanvienForm.controls.MaNhanVien.setValue((nhanvien.id.HoTen || '') + '-' + (nhanvien.id.value || ''));\n        this.nhanvienForm.controls.MaNhanVien.setValue(nhanvien.MaNhanVien);\n        this.nhanvienForm.controls.HoTen.setValue(nhanvien.HoTen);\n        this.nhanvienForm.controls.NgaySinh.setValue(nhanvien.NgaySinh);\n        this.nhanvienForm.controls.GioiTinh.setValue(nhanvien.GioiTinh);\n        this.nhanvienForm.controls.MaPhongBan.setValue(nhanvien.MaPhongBan);\n        this.nhanvienForm.controls.MaChucVu.setValue(nhanvien.MaChucVu);\n        this.nhanvienForm.controls.HeSoLuong.setValue(nhanvien.HeSoLuong);\n      }\n    });\n  }\n}\nNhanvienFormComponent.ɵfac = function NhanvienFormComponent_Factory(t) {\n  return new (t || NhanvienFormComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ServerHttpService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\nNhanvienFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NhanvienFormComponent,\n  selectors: [[\"app-nhanvien-form\"]],\n  decls: 45,\n  vars: 5,\n  consts: [[1, \"container\"], [3, \"formGroup\"], [1, \"form-header\"], [\"matInput\", \"\", \"placeholder\", \"\", \"formControlName\", \"code\", \"require\", \"\"], [\"matInput\", \"\", \"placeholder\", \"\", \"formControlName\", \"gender\", \"require\", \"\"], [\"matInput\", \"\", \"placeholder\", \"\", \"formControlName\", \"firstName\", \"require\", \"\"], [\"matInput\", \"\", \"placeholder\", \"\", \"formControlName\", \"lastName\", \"require\", \"\"], [\"matInput\", \"\", \"placeholder\", \"\", \"formControlName\", \"dob\", \"require\", \"\"], [\"matInput\", \"\", \"placeholder\", \"\", \"formControlName\", \"email\", \"require\", \"\"], [\"matInput\", \"\", \"placeholder\", \"\", \"formControlName\", \"phone\", \"require\", \"\"], [\"matInput\", \"\", \"placeholder\", \"\", \"formControlName\", \"picture\", \"require\", \"\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"], [4, \"ngIf\"], [\"type\", \"submit\", \"class\", \"btn btn-success\", 3, \"disabled\", \"click\", 4, \"ngIf\"]],\n  template: function NhanvienFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"Nh\\u1EADp th\\u00EAm 1 sinh vi\\u00EAn m\\u1EDBi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"form\", 1)(4, \"mat-form-field\", 2)(5, \"mat-label\");\n      i0.ɵɵtext(6, \"M\\u00E3 sinh vi\\u00EAn\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"mat-form-field\", 2)(9, \"mat-label\");\n      i0.ɵɵtext(10, \"Gi\\u1EDBi t\\u00EDnh\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(11, \"input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"mat-form-field\", 2)(13, \"mat-label\");\n      i0.ɵɵtext(14, \"T\\u00EAn\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"mat-form-field\", 2)(17, \"mat-label\");\n      i0.ɵɵtext(18, \"H\\u1ECD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"mat-form-field\", 2)(21, \"mat-label\");\n      i0.ɵɵtext(22, \"Ng\\u00E0y th\\u00E1ng n\\u0103m sinh\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"mat-form-field\", 2)(25, \"mat-label\");\n      i0.ɵɵtext(26, \"\\u0110i\\u1EC7n th\\u01B0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"mat-form-field\", 2)(29, \"mat-label\");\n      i0.ɵɵtext(30, \"\\u0110i\\u1EC7n tho\\u1EA1i\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(31, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"mat-form-field\", 2)(33, \"mat-label\");\n      i0.ɵɵtext(34, \"H\\u00ECnh\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(35, \"input\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(36, \"br\");\n      i0.ɵɵelementStart(37, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function NhanvienFormComponent_Template_button_click_37_listener() {\n        return ctx.saveAndGotoList();\n      });\n      i0.ɵɵtext(38, \" L\\u01B0u v\\u00E0 tr\\u1EDF v\\u1EC1 danh s\\u00E1ch \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(39, \" \\u00A0 \");\n      i0.ɵɵelementStart(40, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function NhanvienFormComponent_Template_button_click_40_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵtext(41, \" L\\u01B0u \");\n      i0.ɵɵtemplate(42, NhanvienFormComponent_span_42_Template, 2, 0, \"span\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(43, \" \\u00A0 \");\n      i0.ɵɵtemplate(44, NhanvienFormComponent_button_44_Template, 2, 1, \"button\", 13);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.nhanvienForm);\n      i0.ɵɵadvance(34);\n      i0.ɵɵproperty(\"disabled\", !ctx.nhanvienForm.valid);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !ctx.nhanvienForm.valid);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.id === 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.id === 0);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i6.MatInput, i7.MatFormField, i7.MatLabel],\n  styles: [\".errorMessage[_ngcontent-%COMP%] {\\r\\n    color: red;\\r\\n  }\\r\\n  .form-header[_ngcontent-%COMP%] {\\r\\n    width: 80%;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbmhhbnZpZW4tZm9ybS9uaGFudmllbi1mb3JtLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxVQUFVO0VBQ1o7RUFDQTtJQUNFLFVBQVU7RUFDWiIsInNvdXJjZXNDb250ZW50IjpbIi5lcnJvck1lc3NhZ2Uge1xyXG4gICAgY29sb3I6IHJlZDtcclxuICB9XHJcbiAgLmZvcm0taGVhZGVyIHtcclxuICAgIHdpZHRoOiA4MCU7XHJcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});\nfunction subscribe(arg0) {\n  throw new Error('Function not implemented.');\n}","map":{"version":3,"mappings":"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","names":["FormGroup","FormControl","i0","NhanvienFormComponent","constructor","user","serverHttp","router","route","MaNhanVien","HoTen","NgaySinh","GioiTinh","MaChucVu","MaPhongBan","HeSoLuong","increamentNhanVien","ngOnInit","id","snapshot","paramMap","get","loadData","getNhanviens","subscribe","data","console","log","controlName","nhanvienForm","controls","setValue","createNewData","newNhanVien","Object","keys","saveAndGotoList","modifyNhanvien","navigate","addNhanvien","save","icreamentNhanvien","reset","ramdomNhanvien","getRamdomNhanvien","results","length","nhanvien","value","selectors","decls","vars","consts","template","ctx","arg0","Error"],"sourceRoot":"","sources":["C:\\Users\\hoain\\OneDrive\\Tài liệu\\GitHub\\QL_Nhan_Su\\src\\app\\nhanvien-form\\nhanvien-form.component.ts","C:\\Users\\hoain\\OneDrive\\Tài liệu\\GitHub\\QL_Nhan_Su\\src\\app\\nhanvien-form\\nhanvien-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { NhanViens } from '../model/nhanviens';\r\nimport { UserService } from '../service/user.service';\r\nimport { ServerHttpService } from '../service/server-http.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-nhanvien-form',\r\n  templateUrl: './nhanvien-form.component.html',\r\n  styleUrls: ['./nhanvien-form.component.css']\r\n})\r\nexport class NhanvienFormComponent implements OnInit  {\r\n\r\n  public id = 0;\r\n  public nhanvienForm = new FormGroup({\r\n    MaNhanVien: new FormControl(''),\r\n    HoTen: new FormControl(''),\r\n    NgaySinh: new FormControl(''),\r\n    GioiTinh: new FormControl(''),\r\n    MaChucVu: new FormControl(''),\r\n    MaPhongBan: new FormControl(''),\r\n    HeSoLuong: new FormControl(''),\r\n    increamentNhanVien: new FormControl(''),\r\n  });\r\n    \r\n  constructor(\r\n    private user:UserService,\r\n    private serverHttp: ServerHttpService,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {}\r\n\r\n\r\n  ngOnInit(): void {\r\n    const id = this.route.snapshot.paramMap.get('id');\r\n    this.id = id ? +id : 0;\r\n    if (this.id > 0) {\r\n      this.loadData(this.id);\r\n    };\r\n  }\r\n  private loadData(id: number) {\r\n    this.serverHttp.getNhanviens().subscribe((data) => {\r\n      console.log('getNhanvien', data);\r\n      const controlName: keyof typeof this.nhanvienForm.controls = 'MaNhanVien';\r\n      for (; controlName; ) {\r\n        this.nhanvienForm.controls[controlName].setValue(data[controlName]);\r\n      }\r\n    });\r\n  }\r\n  \r\n  \r\n  private createNewData(): NhanViens {\r\n    const newNhanVien: NhanViens = {} as NhanViens;\r\n    for (const controlName of (Object.keys(this.nhanvienForm.controls) as any)) {\r\n      if (controlName) {\r\n        newNhanVien[controlName] = this.nhanvienForm.controls.HoTen;\r\n        console.log(newNhanVien[controlName] );\r\n\r\n      }\r\n    }\r\n    return newNhanVien as NhanViens;\r\n  }\r\n  public saveAndGotoList() {\r\n    if (this.id > 0) {\r\n      this.serverHttp\r\n        .modifyNhanvien(this.id, this.createNewData())\r\n        .subscribe((data: any) => {\r\n          this.router.navigate(['nhanviens']);\r\n        });\r\n    } else {\r\n      this.serverHttp.addNhanvien(this.createNewData()).subscribe((data) => {\r\n        this.router.navigate(['nhanviens']);\r\n      });\r\n    }\r\n  }\r\n\r\n  public save() {\r\n    if (this.id > 0) {\r\n      this.serverHttp\r\n        .modifyNhanvien(this.id, this.createNewData())\r\n        .subscribe((data: any) => {\r\n          //\r\n        });\r\n    } else {\r\n      this.serverHttp.addNhanvien(this.createNewData()).subscribe((data) => {\r\n        this.user.icreamentNhanvien()\r\n        this.nhanvienForm.reset();\r\n      });\r\n    }\r\n  }\r\n\r\n  public ramdomNhanvien() {\r\n    this.serverHttp.getRamdomNhanvien() as Observable<any>;\r\n    this.serverHttp.getNhanviens().subscribe((data) => {\r\n      console.log('getRamdomNhanvien', data);\r\n      if(data && data.results && data.results.length > 0) {\r\n        const nhanvien = data.results[0];\r\n        this.nhanvienForm.controls.MaNhanVien.setValue(\r\n          (nhanvien.id.HoTen || '') + '-' + (nhanvien.id.value || '')\r\n        );\r\n        this.nhanvienForm.controls.MaNhanVien.setValue(nhanvien.MaNhanVien);\r\n        this.nhanvienForm.controls.HoTen.setValue(nhanvien.HoTen);\r\n        this.nhanvienForm.controls.NgaySinh.setValue(nhanvien.NgaySinh);\r\n        this.nhanvienForm.controls.GioiTinh.setValue(nhanvien.GioiTinh);\r\n        this.nhanvienForm.controls.MaPhongBan.setValue(nhanvien.MaPhongBan);\r\n        this.nhanvienForm.controls.MaChucVu.setValue(nhanvien.MaChucVu);\r\n        this.nhanvienForm.controls.HeSoLuong.setValue(nhanvien.HeSoLuong);\r\n      }\r\n    })\r\n  }\r\n  \r\n}\r\n\r\nfunction subscribe(arg0: (data: any) => void) {\r\n  throw new Error('Function not implemented.');\r\n}\r\n\r\n","<div class=\"container\">\r\n    <h1>Nhập thêm 1 sinh viên mới</h1>\r\n    <form [formGroup]=\"nhanvienForm\">\r\n      <mat-form-field class=\"form-header\">\r\n        <mat-label>Mã sinh viên</mat-label>\r\n        <input matInput placeholder=\"\" formControlName=\"code\" require />\r\n      </mat-form-field>\r\n      <!--  \r\n      <span *ngIf=\"profileForm.controls.code.invalid\" class=\"errorMessage\">\r\n        * Cần phải nhập mã sinh viên\r\n      </span> -->\r\n      <mat-form-field class=\"form-header\">\r\n        <mat-label>Giới tính</mat-label>\r\n        <input matInput placeholder=\"\" formControlName=\"gender\" require />\r\n      </mat-form-field>\r\n      <mat-form-field class=\"form-header\">\r\n        <mat-label>Tên</mat-label>\r\n        <input matInput placeholder=\"\" formControlName=\"firstName\" require />\r\n      </mat-form-field>\r\n      <mat-form-field class=\"form-header\">\r\n        <mat-label>Họ</mat-label>\r\n        <input matInput placeholder=\"\" formControlName=\"lastName\" require />\r\n      </mat-form-field>\r\n      <mat-form-field class=\"form-header\">\r\n        <mat-label>Ngày tháng năm sinh</mat-label>\r\n        <input matInput placeholder=\"\" formControlName=\"dob\" require />\r\n      </mat-form-field>\r\n      <mat-form-field class=\"form-header\">\r\n        <mat-label>Điện thư</mat-label>\r\n        <input matInput placeholder=\"\" formControlName=\"email\" require />\r\n      </mat-form-field>\r\n      <mat-form-field class=\"form-header\">\r\n        <mat-label>Điện thoại</mat-label>\r\n        <input matInput placeholder=\"\" formControlName=\"phone\" require />\r\n      </mat-form-field>\r\n      <mat-form-field class=\"form-header\">\r\n        <mat-label>Hình</mat-label>\r\n        <input matInput placeholder=\"\" formControlName=\"picture\" require />\r\n      </mat-form-field>\r\n      <br />\r\n      <button\r\n        type=\"submit\"\r\n        class=\"btn btn-success\"\r\n        [disabled]=\"!nhanvienForm.valid\"\r\n        (click)=\"saveAndGotoList()\"\r\n      >\r\n        Lưu và trở về danh sách\r\n      </button>\r\n      &nbsp;\r\n      <button\r\n        type=\"submit\"\r\n        class=\"btn btn-success\"\r\n        [disabled]=\"!nhanvienForm.valid\"\r\n        (click)=\"save()\"\r\n      >\r\n        Lưu <span *ngIf=\"id === 0\">và nhập mới</span>\r\n      </button>\r\n      &nbsp;\r\n      <button\r\n        type=\"submit\"\r\n        class=\"btn btn-success\"\r\n        [disabled]=\"!nhanvienForm.valid\"\r\n        (click)=\"ramdomNhanvien()\"\r\n        *ngIf=\"id === 0\"\r\n      >\r\n        Lấy ngẫu nhiên 1 người\r\n      </button>\r\n    </form>\r\n  </div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}